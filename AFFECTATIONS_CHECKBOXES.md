# âœ… SYSTÃˆME D'AFFECTATION PAR CHECKBOXES

## ğŸ¯ Fonctionnement

### Interface SimplifiÃ©e
Au lieu de sÃ©lectionner un prof puis une UE dans des dropdowns, tu vois maintenant :

**1 SECTION PAR ENSEIGNANT** avec **TOUTES LES UE EN CHECKBOXES**

---

## ğŸ“Š Exemple Visuel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¨â€ğŸ« KOFFI Kodjo                                               â”‚
â”‚ Professeur - CybersÃ©curitÃ©              [3 UE actuellement] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚â˜‘ MTH100-L1IN â”‚  â”‚â˜ PHY101-L1GE â”‚  â”‚â˜‘ INF200-L2IN â”‚     â”‚
â”‚  â”‚Math I        â”‚  â”‚Physique I    â”‚  â”‚Algo AvancÃ©   â”‚     â”‚
â”‚  â”‚3 ECTS  36h   â”‚  â”‚4 ECTS  48h   â”‚  â”‚5 ECTS  60h   â”‚     â”‚
â”‚  â”‚L1 Info    âœ“  â”‚  â”‚L1 GÃ©nie      â”‚  â”‚L2 Info    âœ“  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚â˜ ANG100-L1IN â”‚  â”‚â˜‘ MTH200-L2GE â”‚                        â”‚
â”‚  â”‚Anglais I     â”‚  â”‚Math II       â”‚                        â”‚
â”‚  â”‚2 ECTS  24h   â”‚  â”‚4 ECTS  48h   â”‚                        â”‚
â”‚  â”‚L1 Info       â”‚  â”‚L2 GÃ©nie   âœ“  â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                              â”‚
â”‚                    [ğŸ’¾ Enregistrer les affectations]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¨â€ğŸ« DUPONT Marie                                             â”‚
â”‚ MaÃ®tre de ConfÃ©rences - Physique        [2 UE actuellement] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚â˜ MTH100-L1IN â”‚  â”‚â˜‘ PHY101-L1GE â”‚  â”‚â˜ INF200-L2IN â”‚     â”‚
â”‚  â”‚Math I        â”‚  â”‚Physique I âœ“  â”‚  â”‚Algo AvancÃ©   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                              â”‚
â”‚                    [ğŸ’¾ Enregistrer les affectations]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Affichage des UE

Chaque card d'UE affiche :
- **Code UE** : MTH100-L1INFO (avec mutation classe)
- **IntitulÃ©** : MathÃ©matiques I
- **CrÃ©dits** : 3 ECTS
- **Heures** : 36h (calculÃ© auto)
- **Classe** : L1 Info (badge jaune)
- **FiliÃ¨re** : Licence Informatique
- **IcÃ´ne âœ“** : Si dÃ©jÃ  affectÃ©e Ã  ce prof

---

## ğŸ”„ Processus d'Affectation

### Ã‰tape 1 : AccÃ¨s
```
Directeur â†’ Dashboard â†’ "Affectations UE"
Ou directement : /directeur/affectations-simplifiees
```

### Ã‰tape 2 : SÃ©lection
```
1. Tu vois une section par enseignant
2. Pour Prof. KOFFI :
   - Tu coches MTH100-L1INFO
   - Tu coches MTH100-L1GENIE
   - Tu coches INF200-L2INFO
3. Clique sur "Enregistrer les affectations"
```

### Ã‰tape 3 : RÃ©sultat
```
âœ… Prof. KOFFI enseigne maintenant 3 UE :
   - MTH100 en L1 Info
   - MTH100 en L1 GÃ©nie
   - INF200 en L2 Info
```

---

## ğŸ’¡ Avantages du SystÃ¨me

### 1. Vue Globale
- Tu vois **toutes** les UE disponibles d'un coup
- Tu vois ce qui est **dÃ©jÃ  affectÃ©** (bordure verte + âœ“)

### 2. Affectation Multiple
- Cocher plusieurs UE d'un coup pour un prof
- Un seul clic "Enregistrer" pour tout sauvegarder

### 3. FlexibilitÃ© Totale
- **MTH100-L1INFO** peut Ãªtre affectÃ© Ã  Prof. KOFFI
- **MTH100-L1GENIE** peut Ãªtre affectÃ© Ã  Prof. DUPONT
- **MTH100-L1RESEAU** peut Ãªtre affectÃ© Ã  Prof. MARTIN
- Chaque UE est indÃ©pendante !

### 4. Interface Intuitive
- **Cliquer sur la card** = Cocher/DÃ©cocher
- **Bordure verte** = UE affectÃ©e
- **Badge jaune** = Classe concernÃ©e
- **IcÃ´ne âœ“** = Confirmation visuelle

---

## ğŸ¯ Cas d'Usage

### Cas 1 : Un Prof pour Toutes les Classes
```
Prof. KOFFI enseigne MTH100 dans TOUTES les classes
â†’ Cocher MTH100-L1INFO, MTH100-L1GENIE, MTH100-L1RESEAU, etc.
```

### Cas 2 : SpÃ©cialisation par Classe
```
Prof. KOFFI  â†’ MTH100-L1INFO + MTH100-L1GENIE
Prof. DUPONT â†’ MTH100-L1RESEAU + MTH100-L2INFO
```

### Cas 3 : Un Prof, Une UE
```
Prof. MARTIN â†’ Seulement INF300-M1RESEAU
```

---

## ğŸ”§ Technique

### Route d'Affichage
**URL** : `/directeur/affectations-simplifiees`

```python
@bp.route('/affectations-simplifiees')
def affectations_simplifiees():
    ues = UE.query.order_by(UE.code_ue).all()
    enseignants = Enseignant.query.filter_by(actif=True).all()
    return render_template('directeur/affecter_ues_enseignants.html', 
                         ues=ues, enseignants=enseignants)
```

### Route d'Enregistrement
**URL** : `/directeur/enseignant/<id>/affecter-ues`

```python
@bp.route('/enseignant/<int:enseignant_id>/affecter-ues', methods=['POST'])
def affecter_ues_a_enseignant(enseignant_id):
    enseignant = Enseignant.query.get_or_404(enseignant_id)
    ues_ids = request.form.getlist('ues_ids')
    
    # Supprimer anciennes affectations
    enseignant.ues.clear()
    
    # Ajouter nouvelles affectations
    for ue_id in ues_ids:
        ue = UE.query.get(ue_id)
        if ue:
            enseignant.ues.append(ue)
    
    db.session.commit()
    flash(f"âœ… {len(ues_ids)} UE(s) affectÃ©es", "success")
```

---

## ğŸ¨ Design

### Card UE Non CochÃ©e
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â˜ MTH100-L1INFO     â”‚ â† Bordure grise
â”‚ MathÃ©matiques I    â”‚
â”‚ 3 ECTS  36h        â”‚
â”‚ [L1 Info]          â”‚ â† Badge jaune
â”‚ Licence Info       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Card UE CochÃ©e
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† Bordure verte
â”‚â˜‘ MTH100-L1INFO  âœ“  â”‚ â† IcÃ´ne âœ“
â”‚ MathÃ©matiques I    â”‚
â”‚ 3 ECTS  36h        â”‚
â”‚ [L1 Info]          â”‚
â”‚ Licence Info       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Fond lÃ©gÃ¨rement vert
```

---

## ğŸ“± InteractivitÃ©

### JavaScript
```javascript
// Cliquer sur la card = toggle checkbox
card.addEventListener('click', function() {
    checkbox.checked = !checkbox.checked;
    
    if (checkbox.checked) {
        card.classList.add('border-success', 'bg-light');
    } else {
        card.classList.remove('border-success', 'bg-light');
    }
});
```

### Animation
- **Hover** : Card se soulÃ¨ve lÃ©gÃ¨rement
- **Clic** : Bordure change de couleur instantanÃ©ment
- **Checkbox** : Se met Ã  jour visuellement

---

## ğŸ§ª Test Rapide

### Test 1 : Affectation Simple
```
1. Va sur : Directeur â†’ Affectations UE
2. Cherche "KOFFI Kodjo"
3. Coche 3 UE
4. Clique "Enregistrer"
5. âœ… Voir le message de confirmation
```

### Test 2 : Modification
```
1. Retourne sur Affectations UE
2. DÃ©coche 1 UE, coche 2 nouvelles
3. Enregistrer
4. âœ… Les anciennes sont retirÃ©es, nouvelles ajoutÃ©es
```

### Test 3 : VÃ©rification
```
1. Va sur : Directeur â†’ Enseignants
2. Clique sur "KOFFI"
3. âœ… Voir la liste de ses UE affectÃ©es
```

---

## ğŸ“Š Statistiques AffichÃ©es

Pour chaque enseignant :
- **Nombre d'UE actuellement** : Badge en haut Ã  droite
- **Grade et spÃ©cialitÃ©** : Sous le nom
- **UE cochÃ©es** : Bordure verte + icÃ´ne âœ“

---

## âœ… RÃ©sumÃ©

| FonctionnalitÃ© | Status |
|----------------|--------|
| Checkboxes par UE | âœ… |
| Une section par enseignant | âœ… |
| Affichage classe + filiÃ¨re | âœ… |
| Code UE mutÃ© (MTH100-L1INFO) | âœ… |
| IcÃ´ne âœ“ pour UE affectÃ©es | âœ… |
| Bordure verte = affectÃ© | âœ… |
| Clic sur card = cocher | âœ… |
| Enregistrement en masse | âœ… |
| Lien dans dashboard | âœ… |

---

## ğŸ‰ RÃ©sultat Final

**Tu as maintenant une interface d'affectation ultra-intuitive !**

- âœ… Voir toutes les UE en un coup d'Å“il
- âœ… Cocher/dÃ©cocher facilement
- âœ… Enregistrer toutes les affectations d'un prof en 1 clic
- âœ… Code UE mutÃ© visible (MTH100-L1INFO)
- âœ… Classe affichÃ©e sur chaque UE
- âœ… Interface responsive et moderne

**AccÃ¨s** : Dashboard Directeur â†’ **Affectations UE**

**Date** : 13 FÃ©vrier 2026
**Version** : 3.2.0

