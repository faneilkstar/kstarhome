{% extends "base.html" %}
{% block title %}Absences{% endblock %}

{% block sidebar %}
<ul class="nav flex-column">
  <li class="nav-item">
    <a class="nav-link" href="{{ url_for('directeur.dashboard') }}">
      <i class="fas fa-tachometer-alt"></i> Dashboard
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href="{{ url_for('absences.toutes_absences_directeur') }}">
      <i class="fas fa-user-clock"></i> Absences
    </a>
  </li>
</ul>
{% endblock %}

{% block content %}
<h2><i class="fas fa-user-clock"></i> Gestion des absences</h2>

<div class="card mt-3">
  <div class="card-header">Liste des absences</div>
  <div class="card-body">
    {% if absences %}
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Étudiant</th>
            <th>Classe</th>
            <th>Date</th>
            <th>Motif</th>
          </tr>
        </thead>
        <tbody>
          {% for absence in absences %}
          <tr>
            <td>{{ absence.etudiant.get_nom_complet() }}</td>
            <td>{{ absence.etudiant.classe.nom_classe if absence.etudiant.classe else '-' }}</td>
            <td>{{ absence.date.strftime('%d/%m/%Y') }}</td>
            <td>{{ absence.motif or 'Non précisé' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="text-muted">Aucune absence enregistrée.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
